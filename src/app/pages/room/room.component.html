<div class="header-wrapper">
  <div class="header">
    <div class="hover-card-wrapper">
      <img src="/jagermeister.png" alt="Jagermeister logo" />

      <div class="room-details-card">
        <h3>📋 Room Details</h3>
        <p><strong>Room Name:</strong> {{ roomId }}</p>
        <p><strong>Online People:</strong> {{ players.length }}</p>
        <p *ngIf="showVotes">
          <strong>Average Vote:</strong> {{ averageVote ?? "—" }}
        </p>
        <p><strong>Voted:</strong> {{ votedCount }} / {{ totalPlayers }}</p>
      </div>
    </div>

    <div class="controls-block">
      <div class="vote-deck">
        <button
          *ngFor="let value of voteValues"
          (click)="selectVote(value)"
          [class.selected]="selectedVote === value"
        >
          {{ value }}
        </button>
      </div>

      <div class="controls">
        <button
          class="reveal"
          (click)="toggleReveal()"
          [disabled]="votedCount === 0"
        >
          {{ showVotes ? "🙈 Hide Votes" : "🔒 Reveal Votes" }}
        </button>
        <button class="reset" (click)="resetVotes()">🗑️ Clear Votes</button>
      </div>
    </div>

    <div class="hover-card-wrapper">
      <img src="/jaguar.png" alt="Jaguar image" />

      <div class="room-details-card">
        <h3>📋 Room Details</h3>
        <p><strong>Room Name:</strong> {{ roomId }}</p>
        <p><strong>Online People:</strong> {{ players.length }}</p>
        <p *ngIf="showVotes">
          <strong>Average Vote:</strong> {{ averageVote ?? "—" }}
        </p>
        <p><strong>Voted:</strong> {{ votedCount }} / {{ totalPlayers }}</p>
      </div>
    </div>
  </div>
</div>

<div
  class="average-display"
  [class.visible]="showVotes && averageVote !== null"
>
  🎯 <strong>Average Vote:</strong> {{ averageVote }}
</div>

<ul class="player-list">
  <li *ngFor="let player of players" [class.me]="player.name === userName">
    <span class="playerName">{{ player.name | titlecase }}</span>
    <span class="playerVote">
      <ng-container *ngIf="player.vote">
        {{ showVotes ? player.vote : "✅ Voted" }}
      </ng-container>
      <ng-container *ngIf="!player.vote">❌</ng-container>
    </span>
  </li>
</ul>
