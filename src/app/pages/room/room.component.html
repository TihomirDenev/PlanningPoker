<div class="header-wrapper">
  <div class="header">
    <div class="hover-card-wrapper">
      <img src="/jagermeister.png" alt="Jagermeister logo" />

      <div class="room-details-card">
        <h3>ğŸ“‹ Room Details</h3>
        <p><strong>Room Name:</strong> {{ roomId }}</p>
        <p><strong>Online People:</strong> {{ players.length }}</p>
        <p *ngIf="showVotes">
          <strong>Average Vote:</strong> {{ averageVote ?? "â€”" }}
        </p>
        <p><strong>Voted:</strong> {{ votedCount }} / {{ totalPlayers }}</p>
      </div>
    </div>

    <div class="controls-block">
      <div class="vote-deck">
        <button
          *ngFor="let value of voteValues"
          (click)="selectVote(value)"
          [class.selected]="selectedVote === value"
          [ngClass]="{ 'bin-btn': value === 'bin' }"
          [disabled]="value === 'bin' && !selectedVote"
        >
          <ng-container *ngIf="value !== 'bin'">
            {{ value }}
          </ng-container>
          <ng-container *ngIf="value === 'bin'"> ğŸ—‘ï¸ </ng-container>
        </button>
      </div>

      <div class="controls">
        <button
          class="reveal"
          (click)="toggleReveal()"
          [disabled]="votedCount === 0"
        >
          {{ showVotes ? "ğŸ™ˆ Hide Votes" : "ğŸ”’ Reveal Votes" }}
        </button>
        <button class="reset" (click)="resetVotes()">ğŸ—‘ï¸ Clear Votes</button>
      </div>
    </div>

    <div class="hover-card-wrapper">
      <img src="/jaguar.png" alt="Jaguar image" />

      <div class="room-details-card">
        <h3>ğŸ“‹ Room Details</h3>
        <p><strong>Room Name:</strong> {{ roomId }}</p>
        <p><strong>Online People:</strong> {{ players.length }}</p>
        <p *ngIf="showVotes">
          <strong>Average Vote:</strong> {{ averageVote ?? "â€”" }}
        </p>
        <p><strong>Voted:</strong> {{ votedCount }} / {{ totalPlayers }}</p>
      </div>
    </div>
  </div>
</div>

<div
  class="average-display"
  [class.visible]="showVotes && averageVote !== null"
>
  ğŸ¯ <strong>Average Vote:</strong> {{ averageVote }}
</div>

<ul class="player-list">
  <li *ngFor="let player of sortedPlayers" [class.me]="player.id === playerId">
    <span class="playerName">
      <p>{{ player.name | titlecase }}</p>
      <img
        *ngIf="player.id === playerId"
        class="rename-img"
        src="/rename.png"
        alt="Rename"
        title="Change your name"
        (click)="renamePlayer()"
      />
    </span>
    <span class="playerVote">
      <ng-container *ngIf="player.vote">
        {{ showVotes ? player.vote : "âœ… Voted" }}
      </ng-container>
      <ng-container *ngIf="!player.vote">âŒ</ng-container>
    </span>
  </li>
</ul>
